# יומן שינויים - Google Calendar Smart System

## גרסה 2.0.0 - שדרוג מלא ל-CRUD עם NLP בעברית

### 📅 תאריך: ינואר 2024

---

## 🎉 שינויים עיקריים

### ✨ תכונות חדשות

#### 1. תמיכה מלאה ב-CRUD Operations
- **CREATE** - יצירת אירועים חדשים עם כל הפרמטרים
- **UPDATE** - עדכון אירועים קיימים (כותרת, זמן, צבע, מיקום, תיאור)
- **DELETE** - מחיקת אירועים
- **MOVE** - העברת אירועים בין ימים/שעות
- **DUPLICATE** - שכפול אירועים
- **CHANGE_COLOR** - שינוי צבע אירוע
- **ADD_REMINDER** - הוספת תזכורות
- **ADD_GUEST** - הוספת משתתפים

#### 2. מנתח NLP מתקדם בעברית
- זיהוי פעולות מטקסט חופשי בעברית
- תמיכה בתאריכים יחסיים: "היום", "מחר", "מחרתיים"
- תמיכה בימי שבוע: "יום ראשון", "יום שני", "רביעי", וכו'
- תמיכה בתאריכים מספריים: "15/01/2024", "15.01", "15-01"
- תמיכה בחודשים בעברית: "15 בינואר", "20 במרץ"
- זיהוי שעות: "בשעה 10:00", "ב-14:30", "בשעה 9"

#### 3. מאפיינים מתקדמים
- **צבעים**: 10 צבעים זמינים (כחול, ירוק, אדום, כתום, סגול, צהוב, אפור, ורוד, טורקיז, ירוק בהיר)
- **תזכורות**: תמיכה בתזכורות מרובות (15, 30, 60 דקות וכו')
- **מיקום**: הגדרת מיקום לאירועים
- **תיאור**: הוספת תיאור מפורט
- **משתתפים**: הזמנת משתתפים באמצעות אימייל
- **אירועי כל היום**: תמיכה באירועים של יום שלם

#### 4. חיפוש ומציאת אירועים
- חיפוש לפי eventId מדויק
- חיפוש לפי כותרת (substring matching)
- טווח חיפוש: 30 יום אחורה, 90 יום קדימה

#### 5. הודעות מפורטות בעברית
- כל תגובה כוללת סיכום מלא של הפעולה
- הודעות שגיאה ברורות ומדויקות
- פירוט של כל שינוי שבוצע

---

## 🔧 שינויים טכניים

### קבצים שעודכנו

#### src/appsscript.json
```diff
- "https://www.googleapis.com/auth/calendar.readonly"
+ "https://www.googleapis.com/auth/calendar"
```
- שדרוג מ-readonly ל-full access
- סדר מחדש של ה-scopes

#### src/Code.gs
- **קודם**: 24 שורות, תמיכה רק ב-GET
- **עכשיו**: 727 שורות, תמיכה מלאה ב-GET ו-POST

**פונקציות חדשות:**
- `doPost()` - טיפול בבקשות POST
- `parseAndExecuteCommand()` - ניתוח וביצוע פקודות
- `identifyAction()` - זיהוי סוג הפעולה
- `createEvent()` - יצירת אירוע
- `updateEvent()` - עדכון אירוע
- `deleteEvent()` - מחיקת אירוע
- `moveEvent()` - העברת אירוע
- `duplicateEvent()` - שכפול אירוע
- `changeEventColor()` - שינוי צבע
- `addReminder()` - הוספת תזכורת
- `addGuest()` - הוספת משתתף
- `findEvent()` - חיפוש אירוע
- `parseEventParams()` - ניתוח פרמטרים
- `extractTitle()` - חילוץ כותרת
- `parseDateTime()` - ניתוח תאריך ושעה
- `extractLocation()` - חילוץ מיקום
- `extractColor()` - חילוץ צבע
- `extractReminders()` - חילוץ תזכורות
- `extractGuests()` - חילוץ משתתפים
- `formatDate()` - עיצוב תאריך לעברית
- `formatTime()` - עיצוב שעה

**קבועים חדשים:**
- `COLORS` - מיפוי צבעים לערכי Google Calendar
- `DAYS_OF_WEEK` - מיפוי ימי שבוע בעברית
- `MONTHS` - מיפוי חודשים בעברית

### קבצים חדשים

1. **README.md** (4,918 תווים)
   - מדריך שימוש כללי
   - הנחיות התקנה
   - דוגמאות מהירות
   - מבנה הפרויקט

2. **API_DOCS.md** (5,697 תווים)
   - תיעוד מלא של ה-API
   - כל נקודות הקצה (endpoints)
   - פורמטים ופרמטרים
   - דוגמאות בקשות ותגובות
   - טיפול בשגיאות

3. **EXAMPLES.md** (11,141 תווים)
   - דוגמאות פקודות בעברית טבעית
   - דוגמאות קוד JavaScript
   - דוגמה מלאה של HTML Form
   - שימוש מתקדם (סדרות, queue)
   - טיפים ופתרון בעיות

4. **TEST_SCENARIOS.md** (9,250 תווים)
   - תרחישי בדיקה מלאים
   - כיסוי של כל הפעולות
   - בדיקות NLP
   - בדיקות שגיאות
   - Edge cases
   - טבלת דוח בדיקה

5. **CHANGELOG.md** (קובץ זה)
   - תיעוד כל השינויים
   - השוואה לפני/אחרי

---

## 📊 סטטיסטיקות

### גודל קוד
- **קודם**: 24 שורות
- **עכשיו**: 727 שורות
- **גידול**: 703 שורות (2929%)

### פונקציות
- **קודם**: 1 פונקציה (`doGet`)
- **עכשיו**: 22 פונקציות
- **גידול**: 21 פונקציות חדשות

### תיעוד
- **קודם**: ללא תיעוד
- **עכשיו**: 31,006 תווים של תיעוד
- **קבצים**: 5 קבצי תיעוד

### תכונות
- **קודם**: 2 פעולות (selftest, events)
- **עכשיו**: 10 פעולות (2 GET + 8 POST)

---

## 🔄 תאימות לאחור

### ✅ נשמר
- פונקציית `doGet` עם `mode=selftest`
- פונקציית `doGet` עם `mode=events`
- פורמט JSON של התגובות
- ממשק ה-frontend הקיים

### ➕ נוסף
- פונקציית `doPost` לעריכת אירועים
- תמיכה בפרמטרים נוספים ב-events
- מזהה אירוע (eventId) בתגובות

### 🔧 שינויים קלים
- הרשאות OAuth (מ-readonly ל-full)
- מבנה אירוע כולל שדות נוספים (id, location, description, color)

---

## 🎯 דוגמאות לשימוש החדש

### לפני (גרסה 1.0)
```javascript
// רק קריאה
GET ?mode=events

// תוצאה: רשימת אירועים בלבד
```

### אחרי (גרסה 2.0)
```javascript
// קריאה - אותו דבר
GET ?mode=events

// עריכה - חדש!
POST {
  "command": "צור אירוע פגישה עם דני מחר בשעה 10:00 צבע כחול"
}

// תוצאה:
{
  "success": true,
  "message": "האירוע 'פגישה עם דני' נוצר בהצלחה ב-שני 16/1/2024 בשעה 10:00, צבע כחול",
  "eventId": "abc123..."
}
```

---

## 🚀 הוראות שדרוג

### שלב 1: גיבוי
1. גבה את הקוד הישן מ-Apps Script
2. שמור את כתובת ה-deployment הקיימת

### שלב 2: עדכון הקוד
1. פתח את הפרויקט ב-Google Apps Script
2. החלף את `Code.gs` בקוד החדש
3. החלף את `appsscript.json` בתוכן החדש
4. שמור

### שלב 3: אישור הרשאות
1. הרץ את הפונקציה `doGet` פעם אחת
2. אשר הרשאות חדשות (calendar במקום calendar.readonly)

### שלב 4: פרסום
1. Deploy > Manage deployments
2. בחר את ה-deployment הקיים
3. לחץ על העיפרון (Edit)
4. שנה את Version ל-New version
5. Deploy

### שלב 5: בדיקה
1. בדוק שה-GET endpoints עובדים
2. נסה POST פשוט: `{"command":"צור אירוע בדיקה מחר בשעה 10"}`
3. ודא שהאירוע נוצר ביומן

---

## 🐛 בעיות ידועות ופתרונות

### בעיה: "אין הרשאה"
**פתרון**: אשר מחדש את הרשאות OAuth

### בעיה: "לא זוהתה פעולה"
**פתרון**: השתמש בפעלים ברורים או העבר `action` מפורש

### בעיה: "האירוע לא נמצא"
**פתרון**: ודא שהאירוע קיים בטווח 30 יום אחורה - 90 יום קדימה

---

## 📈 תכניות עתידיות

### גרסה 2.1 (מתוכנן)
- [ ] תמיכה באירועים חוזרים (recurring events)
- [ ] ייצוא אירועים ל-ICS
- [ ] סנכרון עם יומנים נוספים
- [ ] תמיכה ב-webhooks

### גרסה 2.2 (מתוכנן)
- [ ] תמיכה בצירופים (attachments)
- [ ] שליחת הזמנות SMS
- [ ] אינטגרציה עם Zoom/Meet
- [ ] AI suggestions לזמני פגישות

---

## 👥 תורמים

- **מפתח ראשי**: יניב מזרחי
- **תיעוד**: יניב מזרחי
- **בדיקות**: יניב מזרחי

---

## 📞 תמיכה

לשאלות, בעיות או הצעות:
- פתח Issue ב-GitHub
- צור Pull Request עם שיפורים
- צור קשר דרך email

---

## 🎊 תודות מיוחדות

- Google על Apps Script Platform
- Google Calendar API
- קהילת המפתחים

---

**גרסה 2.0.0 - מערכת יומן חכם מלאה עם NLP בעברית** 🎉
